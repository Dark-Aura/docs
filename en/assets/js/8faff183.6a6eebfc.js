(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[1375],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return c},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),u=d(n),m=r,k=u["".concat(s,".").concat(m)]||u[m]||p[m]||i;return n?a.createElement(k,l(l({ref:t},c),{},{components:n})):a.createElement(k,l({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=u;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var d=2;d<i;d++)l[d]=n[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},2856:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return s},metadata:function(){return d},toc:function(){return c},default:function(){return u}});var a=n(2122),r=n(9756),i=(n(7294),n(3905)),l=["components"],o={sidebar_position:7},s="Bundle",d={unversionedId:"guide/dive/bundle",id:"guide/dive/bundle",isDocsHomePage:!1,title:"Bundle",description:"bundle transaction extend the 'transfer' transaction to include external transfer for the original 'transfer' function, as well as internal batch transfers via a specific data field.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/guide/dive/bundle.md",sourceDirName:"guide/dive",slug:"/guide/dive/bundle",permalink:"/en/docs/guide/dive/bundle",editUrl:"https://github.com/everFinance/docs/edit/master/i18n/en/docusaurus-plugin-content-docs/current/guide/dive/bundle.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"guide",previous:{title:"Withdraw",permalink:"/en/docs/guide/dive/withdraw"},next:{title:"Storage Based Computation Paradigm",permalink:"/en/docs/guide/refrence/storage-based-computation-paradigm"}},c=[{value:"Schema",id:"schema",children:[]},{value:"Data Generate Description",id:"data-generate-description",children:[{value:"<code>internalItem</code>",id:"internalitem",children:[]},{value:"bundleData",id:"bundledata",children:[]},{value:"<code>sigs</code> signature structure",id:"sigs-signature-structure",children:[]},{value:"data generation example",id:"data-generation-example",children:[]}]},{value:"External and internal transactions",id:"external-and-internal-transactions",children:[]},{value:"Transaction signature, sending and record acquisition",id:"transaction-signature-sending-and-record-acquisition",children:[]}],p={toc:c};function u(e){var t=e.components,n=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"bundle"},"Bundle"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"bundle")," transaction extend the ",(0,i.kt)("inlineCode",{parentName:"p"},"'transfer'")," transaction to include external transfer for the original ",(0,i.kt)("inlineCode",{parentName:"p"},"'transfer'")," function, as well as internal batch transfers via a specific ",(0,i.kt)("inlineCode",{parentName:"p"},"data")," field."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"data")," contains multiple internal transfer transactions and also contains the signatures of the ",(0,i.kt)("inlineCode",{parentName:"p"},"from")," accounts for all transfer transactions in these internal transfer transactions."),(0,i.kt)("p",null,"All internal transfers in ",(0,i.kt)("inlineCode",{parentName:"p"},"data")," must succeed, and if one fails, all internal transfers are rolled back. A ",(0,i.kt)("inlineCode",{parentName:"p"},"bundle")," transaction can only be executed once, regardless of whether the internal transfer succeeds or fails, and cannot be executed twice after execution."),(0,i.kt)("h2",{id:"schema"},"Schema"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"tokenSymbol"),(0,i.kt)("td",{parentName:"tr",align:null},"Token Symbol")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"action"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"'bundle'")," to batch execute internal transfers")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"from"),(0,i.kt)("td",{parentName:"tr",align:null},"the current everPay account ID that signed the transaction")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"to"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"to")," represents the everPay account ID of the external transfer recipient, which can be any everPay account ID (including the current everPay account ID of the signed transaction)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"amount"),(0,i.kt)("td",{parentName:"tr",align:null},"External transfer amount, type uint; ",(0,i.kt)("inlineCode",{parentName:"td"},"decimals")," processing is required for setting, e.g. 0.1USDT, after USDT's ",(0,i.kt)("inlineCode",{parentName:"td"},"decimals: 6")," processing, it's 100000")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"fee"),(0,i.kt)("td",{parentName:"tr",align:null},"Handling fee, type uint. needs to be decimals, e.g. 0.1USDT, here it's 100000 after USDT's ",(0,i.kt)("inlineCode",{parentName:"td"},"decimals: 6")," processing")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"feeRecipient"),(0,i.kt)("td",{parentName:"tr",align:null},"Receive everPay account ID for handling fees, via ",(0,i.kt)("a",{parentName:"td",href:"../../sdk/server-api/basic-api/info"},"info API")," interface to get")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"nonce"),(0,i.kt)("td",{parentName:"tr",align:null},"unix milliseconds")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"tokenID"),(0,i.kt)("td",{parentName:"tr",align:null},"via ",(0,i.kt)("a",{parentName:"td",href:"../../sdk/server-api/basic-api/info"},"info API")," interface, must be consistent with the token ",(0,i.kt)("inlineCode",{parentName:"td"},"id")," field ",(0,i.kt)("strong",{parentName:"td"},"corresponding to ",(0,i.kt)("inlineCode",{parentName:"strong"},"tokenSymbol")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"chainType"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"chainType")," must be the same as ",(0,i.kt)("a",{parentName:"td",href:"../../sdk/server-api/basic-api/info"},"info API"),", the token ",(0,i.kt)("inlineCode",{parentName:"td"},"chainType")," ",(0,i.kt)("strong",{parentName:"td"},"consistent"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"chainID"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"chainID")," must be the same as ",(0,i.kt)("a",{parentName:"td",href:"../../sdk/server-api/basic-api/info"},"info API"),", the token ",(0,i.kt)("inlineCode",{parentName:"td"},"chainID")," ",(0,i.kt)("strong",{parentName:"td"},"consistent"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"data"),(0,i.kt)("td",{parentName:"tr",align:null},"Specific JSON format for bundle transfer function, see below ",(0,i.kt)("a",{parentName:"td",href:"#data-generate-gescription"},"Data Generate Description"))))),(0,i.kt)("h2",{id:"data-generate-description"},"Data Generate Description"),(0,i.kt)("h3",{id:"internalitem"},(0,i.kt)("inlineCode",{parentName:"h3"},"internalItem")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"internalItem")," for each internal transfer transaction."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"tag"),(0,i.kt)("td",{parentName:"tr",align:null},"combined by ",(0,i.kt)("inlineCode",{parentName:"td"},"chainType"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"symbol"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"id")," via ",(0,i.kt)("inlineCode",{parentName:"td"},"-"),", or via ",(0,i.kt)("a",{parentName:"td",href:"../../sdk/server-api/basic-api/info"},"info API")," to get")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"chainID"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"chainID")," is the same as ",(0,i.kt)("a",{parentName:"td",href:"../../sdk/server-api/basic-api/info"},"info API"),", the token ",(0,i.kt)("inlineCode",{parentName:"td"},"chainID")," ",(0,i.kt)("strong",{parentName:"td"},"consistent"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"from"),(0,i.kt)("td",{parentName:"tr",align:null},"The everPay account ID of the transferor of the assets of this internal transfer transaction")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"to"),(0,i.kt)("td",{parentName:"tr",align:null},"The everPay account ID of the recipient of the asset for this internal transfer transaction")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"amount"),(0,i.kt)("td",{parentName:"tr",align:null},"Amount of this internal transfer transaction asset. type uint; ",(0,i.kt)("inlineCode",{parentName:"td"},"decimals")," processing is required for setting, e.g. 0.1USDT, after USDT's ",(0,i.kt)("inlineCode",{parentName:"td"},"decimals: 6")," processing, it's 100000")))),(0,i.kt)("h3",{id:"bundledata"},"bundleData"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"items"),(0,i.kt)("td",{parentName:"tr",align:null},"Consists of multiple ",(0,i.kt)("inlineCode",{parentName:"td"},"internalItem")," internal transfer transactions")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"expiration"),(0,i.kt)("td",{parentName:"tr",align:null},"Expiration time of all internal transfer transactions, unix timestamp. ",(0,i.kt)("strong",{parentName:"td"},"Note: not millisecond timestamp"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"salt"),(0,i.kt)("td",{parentName:"tr",align:null},"Must be a ",(0,i.kt)("a",{parentName:"td",href:"https://en.wikipedia.org/wiki/Universally_unique_identifier"},(0,i.kt)("inlineCode",{parentName:"a"},"uuid"))," format string for unique identification")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"version"),(0,i.kt)("td",{parentName:"tr",align:null},"bundle version ",(0,i.kt)("inlineCode",{parentName:"td"},"'v1'"))))),(0,i.kt)("h3",{id:"sigs-signature-structure"},(0,i.kt)("inlineCode",{parentName:"h3"},"sigs")," signature structure"),(0,i.kt)("p",null,"The data structure obtained all ",(0,i.kt)("inlineCode",{parentName:"p"},"from")," corresponding everPay accounts' signature. ",(0,i.kt)("strong",{parentName:"p"},"the JSON string from the ",(0,i.kt)("inlineCode",{parentName:"strong"},"bundle")," message")," used to be sign message."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Signature generation rules are the same as ",(0,i.kt)("a",{parentName:"strong",href:"./transaction#signature"},"everPay transaction signature"),".")," Converts ",(0,i.kt)("inlineCode",{parentName:"p"},"bundleData")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"messageData")," by ",(0,i.kt)("inlineCode",{parentName:"p"},"const messageData = JSON.stringfiy(bundleData)")," and then performs subsequent signature processing."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const sigs = {\n  [fromAccount1]: sig1,\n  [fromAccount2]: sig2,\n  // etc.\n}\n")),(0,i.kt)("h3",{id:"data-generation-example"},"data generation example"),(0,i.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"danger")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},"To ensure that the ",(0,i.kt)("inlineCode",{parentName:"li"},"messageData")," used for signature verification is consistent, the order of the ",(0,i.kt)("inlineCode",{parentName:"li"},"internalItem")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"bundleData")," fields must be consistent with the example in order for the signature verification to pass correctly."),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"signBundleData")," in the example is pseudocode, after converting ",(0,i.kt)("inlineCode",{parentName:"li"},"bundleData")," to ",(0,i.kt)("inlineCode",{parentName:"li"},"messageData")," by ",(0,i.kt)("inlineCode",{parentName:"li"},"const messageData = JSON.stringfiy(bundleData)"),", the subsequent signature generation rules are the same as ",(0,i.kt)("a",{parentName:"li",href:"./transaction#signature"},"everPay transaction signature"),".")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const internalItem1 = {\n  tag: 'ethereum-eth-0x0000000000000000000000000000000000000000',\n  chainID: '42',\n  from: '0x26361130d5d6E798E9319114643AF8c868412859',\n  to: '5NPqYBdIsIpJzPeYixuz7BEH_W7BEk_mb8HxBD3OHXo',\n  amount: '1000000000000000'\n}\nconst internalItem2 = {\n  tag: 'ethereum-usdt-0xd85476c906b5301e8e9eb58d174a6f96b9dfc5ee',\n  chainID: '42',\n  from: '5NPqYBdIsIpJzPeYixuz7BEH_W7BEk_mb8HxBD3OHXo',\n  to: '0x26361130d5d6E798E9319114643AF8c868412859',\n  amount: '10000000'\n}\nconst bundleData = {\n  items: [internalItem1, internalItem2],\n  expiration: 1630490852,\n  salt: '23b35070-c5a5-4c66-94f8-ad6064ab5cfc',\n  version: 'v1'\n}\nconst messageData = JSON.stringify(bundleData)\n\n// \"IWoPLghaVs-rD7Gn-Kc5UVB5LwIZhIwGNwK2bN9gikLid1bb8im9Hvfqb2on7K-FiJ1U77fkQSGcMfVbyNeNdbSslIIb-NvtUHQs3Y7jWQBU_TtOyGkcoNkRPXkAYOMaOSgbmZKV3GL4FwuYbO5YfQHomfpIzX5AGk1miPU19lo9IVpPmjJ_youk52pX41rBlTQm6DP76FNMppxC8rXnIDf-o-OMRK_Q0R6QZjUVhpFCBIVNq8P7J4Wm0yTA8QY7A68W2abmC4CU6pa9_ZSYOfcMHypUxIsA9V0nPiCYvOw83jvK2DcFtO3CaAUAiKoj5xdCIXnixNFN-arLa6de0ZOSQRwCxgYxs6w8UhAD-vFapG3cs6dzhYAYDKHuAlKqfaO_z1XToBdjwp0f9eIytJhWVOLLJSVR_1LRvsSc9yDvVk_D4nCeR2BTtevZmw9st1m8pQanqObn_G0qVUHdtkxxalwDdmr_fUEukeSOrzMuQlZ3IjpcKqUXsNqcxqg9uledNLE2yRo6VvXaoWjLOwLvMLBMQ18HGUVbr-I1M-bmX953S2NI43eBjVo0VAYRypBBewSflQE1Ief4xY-cu6-jhRLJYWTpQDup5gOY4O4DLE89GelkP7PsIsm3ZMF_qalOKoqswiEReBCJ4-s1X6Seg4q1kkB6ECT7ZieLmwc,odtNk97a4PARR0I8g3kQpzlFVmPg-udyjfl81fbTioyP2pEw5tP5A1-FVqR-QFFPskW-j7yAze5usYNWHEir7oVQ9d9bbkcZIDEPqwSTO1JoD1BKXeeBK0xsmiSgxeY7uuRXWdhXREhlmIMsV8ObakEeXdbbxbs89XaZHBuES7boASrRVDXRz_mhMu6u_58OdLeMwR3I1BCH6nphNGVOehA7GOOqEBvtesBset0bNaLCb0JpSg5ZW_0AGLP-XydzE3IPLLx4NQEEJY21y8fChxYM4jntI78l5hojp9NlmS69EXlj0PoMjsbaWaz9WtnZaMAbnaOGAHhv8Y_TNmBI0FHpqHaGPP906Mnrgdm3tl2L40EX-Q6-liNVkB56CmPxXzSesu-4x5LLYxQ-aX3W6Hj7RCDTacxqUJHzOrhJqXSx6Jx0t8CwyfReMgVv4p5t1C3OZ8yYbJ_H3LdkeriVniaC5jQdMyIJ6QBMzr1XdXIw9WuEG2kCIYtvOp2qDuu9o2SY-9W4Yv7VWRDfWO38xxR4ZO65MMAdZxeaZ4w8sK_owH46Wm0XoT3Al-LPypaeijWqlHEu4R8c2ersD3xkDvXC_lNtaQw_qyfI3UEH5fWupY4zhZeDGkvXQh32Fv4CxlZL58iUHv9SvR7p5LgBCC3AVUbn7Sqc4xPUCZMj-Tc\"\nconst sigFromAccount1 = await everpayArAccount.signBundleData(bundleData)\n\n// \"0x1cf47183f48c17393e2728b92031eb9f56fc7f89011c618e0cb1d163761b7dbe6e615091f15075b673422a0b1bc363d1ab341cbcee831c1632282e33feda79d21c\"\nconst sigFromAccount2 = await everpayEthAccount.signBundleData(bundleData)\n\nconst sigs = {\n  '5NPqYBdIsIpJzPeYixuz7BEH_W7BEk_mb8HxBD3OHXo': 'IWoPLghaVs-rD7Gn-Kc5UVB5LwIZhIwGNwK2bN9gikLid1bb8im9Hvfqb2on7K-FiJ1U77fkQSGcMfVbyNeNdbSslIIb-NvtUHQs3Y7jWQBU_TtOyGkcoNkRPXkAYOMaOSgbmZKV3GL4FwuYbO5YfQHomfpIzX5AGk1miPU19lo9IVpPmjJ_youk52pX41rBlTQm6DP76FNMppxC8rXnIDf-o-OMRK_Q0R6QZjUVhpFCBIVNq8P7J4Wm0yTA8QY7A68W2abmC4CU6pa9_ZSYOfcMHypUxIsA9V0nPiCYvOw83jvK2DcFtO3CaAUAiKoj5xdCIXnixNFN-arLa6de0ZOSQRwCxgYxs6w8UhAD-vFapG3cs6dzhYAYDKHuAlKqfaO_z1XToBdjwp0f9eIytJhWVOLLJSVR_1LRvsSc9yDvVk_D4nCeR2BTtevZmw9st1m8pQanqObn_G0qVUHdtkxxalwDdmr_fUEukeSOrzMuQlZ3IjpcKqUXsNqcxqg9uledNLE2yRo6VvXaoWjLOwLvMLBMQ18HGUVbr-I1M-bmX953S2NI43eBjVo0VAYRypBBewSflQE1Ief4xY-cu6-jhRLJYWTpQDup5gOY4O4DLE89GelkP7PsIsm3ZMF_qalOKoqswiEReBCJ4-s1X6Seg4q1kkB6ECT7ZieLmwc,odtNk97a4PARR0I8g3kQpzlFVmPg-udyjfl81fbTioyP2pEw5tP5A1-FVqR-QFFPskW-j7yAze5usYNWHEir7oVQ9d9bbkcZIDEPqwSTO1JoD1BKXeeBK0xsmiSgxeY7uuRXWdhXREhlmIMsV8ObakEeXdbbxbs89XaZHBuES7boASrRVDXRz_mhMu6u_58OdLeMwR3I1BCH6nphNGVOehA7GOOqEBvtesBset0bNaLCb0JpSg5ZW_0AGLP-XydzE3IPLLx4NQEEJY21y8fChxYM4jntI78l5hojp9NlmS69EXlj0PoMjsbaWaz9WtnZaMAbnaOGAHhv8Y_TNmBI0FHpqHaGPP906Mnrgdm3tl2L40EX-Q6-liNVkB56CmPxXzSesu-4x5LLYxQ-aX3W6Hj7RCDTacxqUJHzOrhJqXSx6Jx0t8CwyfReMgVv4p5t1C3OZ8yYbJ_H3LdkeriVniaC5jQdMyIJ6QBMzr1XdXIw9WuEG2kCIYtvOp2qDuu9o2SY-9W4Yv7VWRDfWO38xxR4ZO65MMAdZxeaZ4w8sK_owH46Wm0XoT3Al-LPypaeijWqlHEu4R8c2ersD3xkDvXC_lNtaQw_qyfI3UEH5fWupY4zhZeDGkvXQh32Fv4CxlZL58iUHv9SvR7p5LgBCC3AVUbn7Sqc4xPUCZMj-Tc',\n  '0x26361130d5d6E798E9319114643AF8c868412859': '0x1cf47183f48c17393e2728b92031eb9f56fc7f89011c618e0cb1d163761b7dbe6e615091f15075b673422a0b1bc363d1ab341cbcee831c1632282e33feda79d21c'\n}\n\nconst data = JSON.stringify({ bundle: { items, expiration, salt, version, sigs }})\n/*\n{\n  items: [\n    {\n      tag: 'ethereum-eth-0x0000000000000000000000000000000000000000',\n      chainID: '42',\n      from: '0x26361130d5d6E798E9319114643AF8c868412859',\n      to: '5NPqYBdIsIpJzPeYixuz7BEH_W7BEk_mb8HxBD3OHXo',\n      amount: '1000000000000000'\n    },\n    {\n      tag: 'ethereum-usdt-0xd85476c906b5301e8e9eb58d174a6f96b9dfc5ee',\n      chainID: '42',\n      from: '5NPqYBdIsIpJzPeYixuz7BEH_W7BEk_mb8HxBD3OHXo',\n      to: '0x26361130d5d6E798E9319114643AF8c868412859',\n      amount: '10000000'\n    }\n  ],\n  expiration: 1630490852,\n  salt: '23b35070-c5a5-4c66-94f8-ad6064ab5cfc',\n  version: 'v1',\n  sigs: {\n    '5NPqYBdIsIpJzPeYixuz7BEH_W7BEk_mb8HxBD3OHXo': 'IWoPLghaVs-rD7Gn-Kc5UVB5LwIZhIwGNwK2bN9gikLid1bb8im9Hvfqb2on7K-FiJ1U77fkQSGcMfVbyNeNdbSslIIb-NvtUHQs3Y7jWQBU_TtOyGkcoNkRPXkAYOMaOSgbmZKV3GL4FwuYbO5YfQHomfpIzX5AGk1miPU19lo9IVpPmjJ_youk52pX41rBlTQm6DP76FNMppxC8rXnIDf-o-OMRK_Q0R6QZjUVhpFCBIVNq8P7J4Wm0yTA8QY7A68W2abmC4CU6pa9_ZSYOfcMHypUxIsA9V0nPiCYvOw83jvK2DcFtO3CaAUAiKoj5xdCIXnixNFN-arLa6de0ZOSQRwCxgYxs6w8UhAD-vFapG3cs6dzhYAYDKHuAlKqfaO_z1XToBdjwp0f9eIytJhWVOLLJSVR_1LRvsSc9yDvVk_D4nCeR2BTtevZmw9st1m8pQanqObn_G0qVUHdtkxxalwDdmr_fUEukeSOrzMuQlZ3IjpcKqUXsNqcxqg9uledNLE2yRo6VvXaoWjLOwLvMLBMQ18HGUVbr-I1M-bmX953S2NI43eBjVo0VAYRypBBewSflQE1Ief4xY-cu6-jhRLJYWTpQDup5gOY4O4DLE89GelkP7PsIsm3ZMF_qalOKoqswiEReBCJ4-s1X6Seg4q1kkB6ECT7ZieLmwc,odtNk97a4PARR0I8g3kQpzlFVmPg-udyjfl81fbTioyP2pEw5tP5A1-FVqR-QFFPskW-j7yAze5usYNWHEir7oVQ9d9bbkcZIDEPqwSTO1JoD1BKXeeBK0xsmiSgxeY7uuRXWdhXREhlmIMsV8ObakEeXdbbxbs89XaZHBuES7boASrRVDXRz_mhMu6u_58OdLeMwR3I1BCH6nphNGVOehA7GOOqEBvtesBset0bNaLCb0JpSg5ZW_0AGLP-XydzE3IPLLx4NQEEJY21y8fChxYM4jntI78l5hojp9NlmS69EXlj0PoMjsbaWaz9WtnZaMAbnaOGAHhv8Y_TNmBI0FHpqHaGPP906Mnrgdm3tl2L40EX-Q6-liNVkB56CmPxXzSesu-4x5LLYxQ-aX3W6Hj7RCDTacxqUJHzOrhJqXSx6Jx0t8CwyfReMgVv4p5t1C3OZ8yYbJ_H3LdkeriVniaC5jQdMyIJ6QBMzr1XdXIw9WuEG2kCIYtvOp2qDuu9o2SY-9W4Yv7VWRDfWO38xxR4ZO65MMAdZxeaZ4w8sK_owH46Wm0XoT3Al-LPypaeijWqlHEu4R8c2ersD3xkDvXC_lNtaQw_qyfI3UEH5fWupY4zhZeDGkvXQh32Fv4CxlZL58iUHv9SvR7p5LgBCC3AVUbn7Sqc4xPUCZMj-Tc',\n    '0x26361130d5d6E798E9319114643AF8c868412859': '0x1cf47183f48c17393e2728b92031eb9f56fc7f89011c618e0cb1d163761b7dbe6e615091f15075b673422a0b1bc363d1ab341cbcee831c1632282e33feda79d21c'\n  }\n}\n*/\n")),(0,i.kt)("h2",{id:"external-and-internal-transactions"},"External and internal transactions"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Internal transfers must contain the signatures of all ",(0,i.kt)("inlineCode",{parentName:"li"},"from")," accounts (within all associated internal transfer transactions) for ",(0,i.kt)("inlineCode",{parentName:"li"},"bundleData")),(0,i.kt)("li",{parentName:"ul"},"External transfers can be initiated by any everPay account, not limited to the everPay account of the internal transfer"),(0,i.kt)("li",{parentName:"ul"},"Successful external transfer transaction",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"All signatures of ",(0,i.kt)("inlineCode",{parentName:"li"},"sigs")," in ",(0,i.kt)("inlineCode",{parentName:"li"},"data")," are validated and the internal transfer transaction is successful"),(0,i.kt)("li",{parentName:"ul"},"Any one of the ",(0,i.kt)("inlineCode",{parentName:"li"},"sigs")," in ",(0,i.kt)("inlineCode",{parentName:"li"},"data")," fails, the internal transfer transaction fails, but the external transfer transaction still executes normally"))),(0,i.kt)("li",{parentName:"ul"},"The external transfer transaction fails",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Internal transfer transactions fail at the same time")))),(0,i.kt)("h2",{id:"transaction-signature-sending-and-record-acquisition"},"Transaction signature, sending and record acquisition"),(0,i.kt)("p",null,"Developers can visit the ",(0,i.kt)("a",{parentName:"p",href:"./transaction#messagedata"},"Guide - Dive - Transaction")," chapter for more information."))}u.isMDXComponent=!0}}]);