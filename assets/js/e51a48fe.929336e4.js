(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[4591],{3905:function(e,n,t){"use strict";t.d(n,{Zo:function(){return p},kt:function(){return k}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=a.createContext({}),d=function(e){var n=a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},p=function(e){var n=d(e.components);return a.createElement(o.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=d(t),k=r,c=m["".concat(o,".").concat(k)]||m[k]||u[k]||i;return t?a.createElement(c,l(l({ref:n},p),{},{components:t})):a.createElement(c,l({ref:n},p))}));function k(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,l=new Array(i);l[0]=m;var s={};for(var o in n)hasOwnProperty.call(n,o)&&(s[o]=n[o]);s.originalType=e,s.mdxType="string"==typeof e?e:r,l[1]=s;for(var d=2;d<i;d++)l[d]=t[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},3057:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return s},contentTitle:function(){return o},metadata:function(){return d},toc:function(){return p},default:function(){return m}});var a=t(2122),r=t(9756),i=(t(7294),t(3905)),l=["components"],s={sidebar_position:3},o="\u4ea4\u6613",d={unversionedId:"guide/dive/transaction",id:"guide/dive/transaction",isDocsHomePage:!1,title:"\u4ea4\u6613",description:"everPay \u6709\u81ea\u5df1\u72ec\u7acb\u7684\u4ea4\u6613\u683c\u5f0f\uff0c\u6240\u6709\u7684 everPay \u4ea4\u6613\u90fd\u9075\u5faa\u76f8\u540c\u7684\u683c\u5f0f\uff0c\u7b7e\u7f72\u76f8\u540c\u7684\u7b7e\u540d\u89c4\u8303\uff0c\u5b58\u50a8\u5728 arweave \u533a\u5757\u94fe\u4e0a\uff0c\u4f9b\u6240\u6709\u4eba\u9a8c\u8bc1\u3002",source:"@site/docs/guide/dive/transaction.md",sourceDirName:"guide/dive",slug:"/guide/dive/transaction",permalink:"/docs/guide/dive/transaction",editUrl:"https://github.com/everFinance/docs/edit/master/docs/guide/dive/transaction.md",version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"guide",previous:{title:"\u8d26\u6237\u6a21\u578b",permalink:"/docs/guide/dive/account-model"},next:{title:"\u5145\u503c",permalink:"/docs/guide/dive/deposit"}},p=[{value:"Schema",id:"schema",children:[{value:"\u4ee5\u592a\u574a\u8d26\u6237\u793a\u4f8b",id:"\u4ee5\u592a\u574a\u8d26\u6237\u793a\u4f8b",children:[]},{value:"Arweave \u8d26\u6237\u793a\u4f8b",id:"arweave-\u8d26\u6237\u793a\u4f8b",children:[]}]},{value:"messageData",id:"messagedata",children:[{value:"\u751f\u6210\u89c4\u5219",id:"\u751f\u6210\u89c4\u5219",children:[]},{value:"\u4ee5\u592a\u574a\u8d26\u6237\u793a\u4f8b",id:"\u4ee5\u592a\u574a\u8d26\u6237\u793a\u4f8b-1",children:[]},{value:"Arweave \u8d26\u6237\u793a\u4f8b",id:"arweave-\u8d26\u6237\u793a\u4f8b-1",children:[]}]},{value:"everHash",id:"everhash",children:[{value:"\u751f\u6210\u89c4\u5219",id:"\u751f\u6210\u89c4\u5219-1",children:[]}]},{value:"signature",id:"signature",children:[{value:"\u4ee5\u592a\u574a\u8d26\u6237\u6a21\u578b",id:"\u4ee5\u592a\u574a\u8d26\u6237\u6a21\u578b",children:[]},{value:"Arweave \u8d26\u6237\u6a21\u578b",id:"arweave-\u8d26\u6237\u6a21\u578b",children:[]}]},{value:"signature \u6821\u9a8c",id:"signature-\u6821\u9a8c",children:[{value:"\u4ee5\u592a\u574a\u8d26\u6237\u6a21\u578b",id:"\u4ee5\u592a\u574a\u8d26\u6237\u6a21\u578b-1",children:[]},{value:"Arweave \u8d26\u6237\u6a21\u578b",id:"arweave-\u8d26\u6237\u6a21\u578b-1",children:[]}]},{value:"\u63d0\u4ea4\u4ea4\u6613",id:"\u63d0\u4ea4\u4ea4\u6613",children:[{value:"\u5b57\u6bb5",id:"\u5b57\u6bb5",children:[]},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",children:[]},{value:"nonce",id:"nonce",children:[]}]},{value:"\u4ea4\u6613\u8bb0\u5f55",id:"\u4ea4\u6613\u8bb0\u5f55",children:[{value:"\u5b57\u6bb5",id:"\u5b57\u6bb5-1",children:[]},{value:"\u67e5\u8be2\u63a5\u53e3",id:"\u67e5\u8be2\u63a5\u53e3",children:[]}]}],u={toc:p};function m(e){var n=e.components,t=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,a.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"\u4ea4\u6613"},"\u4ea4\u6613"),(0,i.kt)("p",null,"everPay \u6709\u81ea\u5df1\u72ec\u7acb\u7684\u4ea4\u6613\u683c\u5f0f\uff0c\u6240\u6709\u7684 everPay \u4ea4\u6613\u90fd\u9075\u5faa\u76f8\u540c\u7684\u683c\u5f0f\uff0c\u7b7e\u7f72\u76f8\u540c\u7684\u7b7e\u540d\u89c4\u8303\uff0c\u5b58\u50a8\u5728 arweave \u533a\u5757\u94fe\u4e0a\uff0c\u4f9b\u6240\u6709\u4eba\u9a8c\u8bc1\u3002"),(0,i.kt)("h2",{id:"schema"},"Schema"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5"),(0,i.kt)("th",{parentName:"tr",align:null},"\u63cf\u8ff0"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"tokenSymbol"),(0,i.kt)("td",{parentName:"tr",align:null},"\u4ee3\u5e01\u540d\u79f0")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"action"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("ul",null,(0,i.kt)("li",null,(0,i.kt)("inlineCode",{parentName:"td"},"'mint'"),"\u4ee3\u8868\u5145\u503c"),(0,i.kt)("li",null,(0,i.kt)("inlineCode",{parentName:"td"},"'transfer'"),"\u4ee3\u8868\u8f6c\u8d26"),(0,i.kt)("li",null,(0,i.kt)("inlineCode",{parentName:"td"},"'burn'"),"\u4ee3\u8868\u63d0\u73b0")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"from"),(0,i.kt)("td",{parentName:"tr",align:null},"\u7b7e\u540d\u4ea4\u6613\u7684\u5f53\u524d everPay \u8d26\u6237 ID")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"to"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("ul",null,(0,i.kt)("li",null,"\u8f6c\u8d26\u65f6\uff0c",(0,i.kt)("inlineCode",{parentName:"td"},"to")," \u4e3a\u53e6\u4e00\u4e2a everPay \u8d26\u6237 ID"),(0,i.kt)("li",null,"\u63d0\u73b0\u65f6\uff0c",(0,i.kt)("inlineCode",{parentName:"td"},"to")," \u4e3a\u8981\u63d0\u73b0\u81f3\u7684\u533a\u5757\u94fe\u94b1\u5305\u5730\u5740")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"amount"),(0,i.kt)("td",{parentName:"tr",align:null},"\u8f6c\u8d26\u91d1\u989d\u6216\u63d0\u73b0\u91d1\u989d\uff0c\u7c7b\u578b\u4e3a uint\u3002\u8bbe\u7f6e\u65f6\u9700\u8981\u8fdb\u884c ",(0,i.kt)("inlineCode",{parentName:"td"},"decimals")," \u5904\u7406\uff0c\u4f8b\u5982 0.1USDT\uff0c\u6b64\u5904\u7ecf\u8fc7 USDT \u7684 ",(0,i.kt)("inlineCode",{parentName:"td"},"decimals: 6")," \u5904\u7406\u540e\uff0c\u4e3a 100000")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"fee"),(0,i.kt)("td",{parentName:"tr",align:null},"\u624b\u7eed\u8d39\uff0c\u7c7b\u578b\u4e3a uint\u3002\u9700\u8981\u8fdb\u884c decimals \u5904\u7406\uff0c\u4f8b\u5982 0.1USDT\uff0c\u6b64\u5904\u7ecf\u8fc7 USDT \u7684 ",(0,i.kt)("inlineCode",{parentName:"td"},"decimals: 6")," \u5904\u7406\u540e\uff0c\u4e3a 100000")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"feeRecipient"),(0,i.kt)("td",{parentName:"tr",align:null},"\u624b\u7eed\u8d39\u6536\u6b3e everPay \u8d26\u6237 ID\uff0c\u901a\u8fc7 ",(0,i.kt)("a",{parentName:"td",href:"../../sdk/server-api/basic-api/info"},"info API")," \u63a5\u53e3\u83b7\u53d6")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"nonce"),(0,i.kt)("td",{parentName:"tr",align:null},"unix milliseconds\uff0cunix \u6beb\u79d2\u65f6\u95f4\u6233")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"tokenID"),(0,i.kt)("td",{parentName:"tr",align:null},"\u901a\u8fc7 ",(0,i.kt)("a",{parentName:"td",href:"../../sdk/server-api/basic-api/info"},"info API")," \u63a5\u53e3\u83b7\u53d6\uff0c\u5fc5\u987b\u4e0e ",(0,i.kt)("inlineCode",{parentName:"td"},"tokenSymbol")," \u5bf9\u5e94\u7684 token ",(0,i.kt)("inlineCode",{parentName:"td"},"id")," \u5b57\u6bb5",(0,i.kt)("strong",{parentName:"td"},"\u4e00\u81f4"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"chainType"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("ul",null,(0,i.kt)("li",null,"\u8f6c\u8d26\u65f6\uff0c",(0,i.kt)("inlineCode",{parentName:"td"},"chainType")," \u5fc5\u987b\u4e0e ",(0,i.kt)("a",{parentName:"td",href:"../../sdk/server-api/basic-api/info"},"info API")," \u63a5\u53e3\u83b7\u53d6\u7684 ",(0,i.kt)("inlineCode",{parentName:"td"},"tokenSymbol")," \u5bf9\u5e94 token ",(0,i.kt)("inlineCode",{parentName:"td"},"chainType")," ",(0,i.kt)("strong",{parentName:"td"},"\u4e00\u81f4")),(0,i.kt)("li",null,"\u63d0\u73b0\u65f6\uff0c",(0,i.kt)("inlineCode",{parentName:"td"},"chainType")," \u4e3a\u8981\u63d0\u73b0\u81f3\u7684\u533a\u5757\u94fe\u540d\u79f0\u3002\u4f8b\u5982 AR Token \u652f\u6301\u63d0\u73b0\u81f3 Arweave \u548c\u4ee5\u592a\u574a\u533a\u5757\u94fe\uff0ctoken ",(0,i.kt)("inlineCode",{parentName:"td"},"chainType")," \u5b57\u6bb5\u4e3a ",(0,i.kt)("inlineCode",{parentName:"td"},"arweave,ethereum"),"\uff0c\u5f00\u53d1\u8005\u9700\u8981\u6307\u5b9a\u63d0\u73b0\u81f3\u54ea\u4e2a\u533a\u5757\u94fe\uff0c",(0,i.kt)("inlineCode",{parentName:"td"},"arweave"),"\u4e3a Arweave \u533a\u5757\u94fe\uff0c",(0,i.kt)("inlineCode",{parentName:"td"},"ethereum")," \u4e3a\u4ee5\u592a\u574a\u533a\u5757\u94fe\u3002")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"chainID"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("ul",null,(0,i.kt)("li",null,"\u8f6c\u8d26\u65f6\uff0c",(0,i.kt)("inlineCode",{parentName:"td"},"chainID")," \u5fc5\u987b\u4e0e ",(0,i.kt)("a",{parentName:"td",href:"../../sdk/server-api/basic-api/info"},"info API")," \u63a5\u53e3\u83b7\u53d6\u7684 ",(0,i.kt)("inlineCode",{parentName:"td"},"tokenSymbol")," \u5bf9\u5e94 ",(0,i.kt)("inlineCode",{parentName:"td"},"chainID")," ",(0,i.kt)("strong",{parentName:"td"},"\u4e00\u81f4")),(0,i.kt)("li",null,"\u63d0\u73b0\u65f6\uff0c",(0,i.kt)("inlineCode",{parentName:"td"},"chainID")," \u4e3a\u8981\u63d0\u73b0\u81f3\u7684\u533a\u5757\u94fe\u7f51\u7edc ID\uff0c\u4f8b\u5982 AR Token \u652f\u6301\u63d0\u73b0\u81f3 Arweave \u548c\u4ee5\u592a\u574a\u533a\u5757\u94fe\uff0ctoken ",(0,i.kt)("inlineCode",{parentName:"td"},"chainID")," \u5b57\u6bb5\u4e3a ",(0,i.kt)("inlineCode",{parentName:"td"},"0,1"),"\uff0c\u5f00\u53d1\u8005\u6307\u5b9a\u63d0\u73b0\u81f3\u54ea\u4e2a\u533a\u5757\u94fe\uff0c",(0,i.kt)("inlineCode",{parentName:"td"},"chainID")," \u4e5f\u9700\u8981\u4f7f\u7528\u5bf9\u5e94\u7684\u503c\uff0c",(0,i.kt)("inlineCode",{parentName:"td"},"0"),"\u4e3a Arweave \u533a\u5757\u94fe\u7f51\u7edc ID\uff0c",(0,i.kt)("inlineCode",{parentName:"td"},"1")," \u4e3a\u4ee5\u592a\u574a\u533a\u5757\u94fe\u7f51\u7edc ID")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"data"),(0,i.kt)("td",{parentName:"tr",align:null},"\u9644\u52a0\u4fe1\u606f\uff0c\u5f00\u53d1\u8005\u53ef\u81ea\u5b9a\u4e49JSON \u6570\u636e\uff0c\u7ecf\u8fc7 ",(0,i.kt)("inlineCode",{parentName:"td"},"JSON.stringify()")," \u5904\u7406\u540e\u4f20\u9012\u3002",(0,i.kt)("ul",null,(0,i.kt)("li",null,(0,i.kt)("strong",{parentName:"td"},"\u5f53\u524d\u8d26\u6237\u4e3a arweave \u8d26\u6237\u6a21\u578b\uff0c\u9700\u8981\u4f20\u9012",(0,i.kt)("inlineCode",{parentName:"strong"},'{"arOwner": "current arweave address\'s owner(public key)"}')),"\uff0c\u7528\u4e8e RSA-PSS sha256 \u9a8c\u8bc1"),(0,i.kt)("li",null,"\u6b64\u5916\uff0c\u5f00\u53d1\u8005\u53ef\u901a\u8fc7 ",(0,i.kt)("inlineCode",{parentName:"td"},"data")," \u81ea\u5b9a\u4e49\u5b9e\u73b0\u4e00\u4e9b\u590d\u6742\u529f\u80fd\uff0c\u4f8b\u5982 ",(0,i.kt)("a",{parentName:"td",href:"./withdraw#%E5%BF%AB%E9%80%9F%E6%8F%90%E7%8E%B0-data-%E5%AD%97%E6%AE%B5%E8%AF%B4%E6%98%8E"},"\u5feb\u901f\u63d0\u73b0"))))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"version"),(0,i.kt)("td",{parentName:"tr",align:null},"\u4ea4\u6613\u7248\u672c ",(0,i.kt)("inlineCode",{parentName:"td"},"'v1'"))))),(0,i.kt)("h3",{id:"\u4ee5\u592a\u574a\u8d26\u6237\u793a\u4f8b"},"\u4ee5\u592a\u574a\u8d26\u6237\u793a\u4f8b"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const everpayTxWithoutSig = {\n  tokenSymbol: 'usdt',\n  action: 'transfer',\n  from: '0x26361130d5d6E798E9319114643AF8c868412859',\n  to: '5NPqYBdIsIpJzPeYixuz7BEH_W7BEk_mb8HxBD3OHXo',\n  amount: '5260000',\n  fee: '0',\n  feeRecipient: '0x6451eB7f668de69Fb4C943Db72bCF2A73DeeC6B1',\n  nonce: '1626079771946',\n  tokenID: '0xd85476c906b5301e8e9eb58d174a6f96b9dfc5ee',\n  chainType: 'ethereum',\n  chainID: '42',\n  data: '{\"hello\":\"world\",\"this\":\"is everpay\"}',\n  version: 'v1'\n}\n")),(0,i.kt)("h3",{id:"arweave-\u8d26\u6237\u793a\u4f8b"},"Arweave \u8d26\u6237\u793a\u4f8b"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const everpayTxWithoutSig = {\n  tokenSymbol: 'ar',\n  action: 'transfer',\n  from: '5NPqYBdIsIpJzPeYixuz7BEH_W7BEk_mb8HxBD3OHXo',\n  to: '0x26361130d5d6E798E9319114643AF8c868412859',\n  amount: '100',\n  fee: '0',\n  feeRecipient: '0x6451eB7f668de69Fb4C943Db72bCF2A73DeeC6B1',\n  nonce: '1626080392301',\n  tokenID: 'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,0xcc9141efa8c20c7df0778748255b1487957811be',\n  chainType: 'arweave,ethereum',\n  chainID: '0,42',\n  data: '{\"hello\":\"world\",\"this\":\"is everpay\",\"arOwner\":\"odtNk97a4PARR0I8g3kQpzlFVmPg-udyjfl81fbTioyP2pEw5tP5A1-FVqR-QFFPskW-j7yAze5usYNWHEir7oVQ9d9bbkcZIDEPqwSTO1JoD1BKXeeBK0xsmiSgxeY7uuRXWdhXREhlmIMsV8ObakEeXdbbxbs89XaZHBuES7boASrRVDXRz_mhMu6u_58OdLeMwR3I1BCH6nphNGVOehA7GOOqEBvtesBset0bNaLCb0JpSg5ZW_0AGLP-XydzE3IPLLx4NQEEJY21y8fChxYM4jntI78l5hojp9NlmS69EXlj0PoMjsbaWaz9WtnZaMAbnaOGAHhv8Y_TNmBI0FHpqHaGPP906Mnrgdm3tl2L40EX-Q6-liNVkB56CmPxXzSesu-4x5LLYxQ-aX3W6Hj7RCDTacxqUJHzOrhJqXSx6Jx0t8CwyfReMgVv4p5t1C3OZ8yYbJ_H3LdkeriVniaC5jQdMyIJ6QBMzr1XdXIw9WuEG2kCIYtvOp2qDuu9o2SY-9W4Yv7VWRDfWO38xxR4ZO65MMAdZxeaZ4w8sK_owH46Wm0XoT3Al-LPypaeijWqlHEu4R8c2ersD3xkDvXC_lNtaQw_qyfI3UEH5fWupY4zhZeDGkvXQh32Fv4CxlZL58iUHv9SvR7p5LgBCC3AVUbn7Sqc4xPUCZMj-Tc\"}',\n  version: 'v1'\n}\n")),(0,i.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"danger")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"\u5f53\u524d\u8d26\u6237\u4e3a arweave \u8d26\u6237\u6a21\u578b\uff0c",(0,i.kt)("inlineCode",{parentName:"p"},"data")," \u5b57\u6bb5\u9700\u8981\u4f20\u9012 ",(0,i.kt)("inlineCode",{parentName:"p"},'"arOwner": "current arweave address\'s owner(public key)"'),"\uff0c\u7528\u4e8e RSA-PSS sha256 \u9a8c\u8bc1"))),(0,i.kt)("h2",{id:"messagedata"},"messageData"),(0,i.kt)("p",null,"\u7531 Schema \u6309\u7167\u7edf\u4e00\u683c\u5f0f\u751f\u6210\uff0c\u7528\u4e8e\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u4ee5\u592a\u574a personalSign \u7b7e\u540d"),(0,i.kt)("li",{parentName:"ul"},"\u751f\u6210 ",(0,i.kt)("inlineCode",{parentName:"li"},"everHash"))),(0,i.kt)("h3",{id:"\u751f\u6210\u89c4\u5219"},"\u751f\u6210\u89c4\u5219"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"export const getEverpayTxMessageData = (everpayTxWithoutSig: EverpayTxWithoutSig): string => {\n  const keys = [\n    'tokenSymbol',\n    'action',\n    'from',\n    'to',\n    'amount',\n    'fee',\n    'feeRecipient',\n    'nonce',\n    'tokenID',\n    'chainType',\n    'chainID',\n    'data',\n    'version'\n  ] as const\n  return keys.map(key => `${key}:${everpayTxWithoutSig[key]}`).join('\\n')\n}\n")),(0,i.kt)("p",null,"\u5176\u4e2d ",(0,i.kt)("inlineCode",{parentName:"p"},"EverpayTxWithoutSig")," \u53ef\u53c2\u8003 ",(0,i.kt)("a",{parentName:"p",href:"../../sdk/everpay-js/types#everpaytxwithoutsig"},"everpay-js types#EverpayTxWithoutSig")),(0,i.kt)("h3",{id:"\u4ee5\u592a\u574a\u8d26\u6237\u793a\u4f8b-1"},"\u4ee5\u592a\u574a\u8d26\u6237\u793a\u4f8b"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'const messageData = `tokenSymbol:usdt\naction:transfer\nfrom:0x26361130d5d6E798E9319114643AF8c868412859\nto:5NPqYBdIsIpJzPeYixuz7BEH_W7BEk_mb8HxBD3OHXo\namount:5260000\nfee:0\nfeeRecipient:0x6451eB7f668de69Fb4C943Db72bCF2A73DeeC6B1\nnonce:1626079771946\ntokenID:0xd85476c906b5301e8e9eb58d174a6f96b9dfc5ee\nchainType:ethereum\nchainID:42\ndata:{"hello":"world","this":"is everpay"}\nversion:v1`\n')),(0,i.kt)("h3",{id:"arweave-\u8d26\u6237\u793a\u4f8b-1"},"Arweave \u8d26\u6237\u793a\u4f8b"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'const messageData = `tokenSymbol:ar\naction:transfer\nfrom:5NPqYBdIsIpJzPeYixuz7BEH_W7BEk_mb8HxBD3OHXo\nto:0x26361130d5d6E798E9319114643AF8c868412859\namount:100\nfee:0\nfeeRecipient:0x6451eB7f668de69Fb4C943Db72bCF2A73DeeC6B1\nnonce:1626080392301\ntokenID:AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,0xcc9141efa8c20c7df0778748255b1487957811be\nchainType:arweave,ethereum\nchainID:0,42\ndata:{"hello":"world","this":"is everpay","arOwner":"odtNk97a4PARR0I8g3kQpzlFVmPg-udyjfl81fbTioyP2pEw5tP5A1-FVqR-QFFPskW-j7yAze5usYNWHEir7oVQ9d9bbkcZIDEPqwSTO1JoD1BKXeeBK0xsmiSgxeY7uuRXWdhXREhlmIMsV8ObakEeXdbbxbs89XaZHBuES7boASrRVDXRz_mhMu6u_58OdLeMwR3I1BCH6nphNGVOehA7GOOqEBvtesBset0bNaLCb0JpSg5ZW_0AGLP-XydzE3IPLLx4NQEEJY21y8fChxYM4jntI78l5hojp9NlmS69EXlj0PoMjsbaWaz9WtnZaMAbnaOGAHhv8Y_TNmBI0FHpqHaGPP906Mnrgdm3tl2L40EX-Q6-liNVkB56CmPxXzSesu-4x5LLYxQ-aX3W6Hj7RCDTacxqUJHzOrhJqXSx6Jx0t8CwyfReMgVv4p5t1C3OZ8yYbJ_H3LdkeriVniaC5jQdMyIJ6QBMzr1XdXIw9WuEG2kCIYtvOp2qDuu9o2SY-9W4Yv7VWRDfWO38xxR4ZO65MMAdZxeaZ4w8sK_owH46Wm0XoT3Al-LPypaeijWqlHEu4R8c2ersD3xkDvXC_lNtaQw_qyfI3UEH5fWupY4zhZeDGkvXQh32Fv4CxlZL58iUHv9SvR7p5LgBCC3AVUbn7Sqc4xPUCZMj-Tc"}\nversion:v1`\n')),(0,i.kt)("h2",{id:"everhash"},"everHash"),(0,i.kt)("p",null,"\u6bcf\u4e00\u7b14 everPay \u4ea4\u6613\u90fd\u6709\u552f\u4e00\u6807\u8bc6\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"everHash"),"\u3002",(0,i.kt)("inlineCode",{parentName:"p"},"everHash")," \u7531 ",(0,i.kt)("inlineCode",{parentName:"p"},"messageData")," \u4f7f\u7528\u4ee5\u592a\u574a ",(0,i.kt)("inlineCode",{parentName:"p"},"hashPersonalMessage")," \u751f\u6210\u3002"),(0,i.kt)("h3",{id:"\u751f\u6210\u89c4\u5219-1"},"\u751f\u6210\u89c4\u5219"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"// cp from: https://github.com/ethereumjs/ethereumjs-util/blob/ebf40a0fba8b00ba9acae58405bca4415e383a0d/src/signature.ts#L168\nconst hashPersonalMessage = (message: Buffer): Buffer => {\n  const prefix = Buffer.from(\n    `\\u0019Ethereum Signed Message:\\n${message.length.toString()}`,\n    'utf-8'\n  )\n  return keccak256(Buffer.concat([prefix, message]))\n}\nconst getEverHash = (messageData: string): string => {\n  const personalMsgHash = hashPersonalMessage(Buffer.from(messageData))\n  const everHash = `0x${personalMsgHash.toString('hex')}`\n  return everHash\n}\n")),(0,i.kt)("h2",{id:"signature"},"signature"),(0,i.kt)("p",null,"\u6bcf\u4e00\u7b14 everPay \u4ea4\u6613\uff0c\u90fd\u9700\u8981\u901a\u8fc7 \u53d1\u9001\u8005\u8d26\u6237\u7684\u94b1\u5305\u8fdb\u884c\u7b7e\u540d\uff0ceverPay \u670d\u52a1\u5668\u4f1a\u6821\u9a8c\u6240\u6709\u7b7e\u540d\u7684\u6709\u6548\u6027\u3002"),(0,i.kt)("h3",{id:"\u4ee5\u592a\u574a\u8d26\u6237\u6a21\u578b"},"\u4ee5\u592a\u574a\u8d26\u6237\u6a21\u578b"),(0,i.kt)("p",null,"\u901a\u8fc7 ethereum ",(0,i.kt)("inlineCode",{parentName:"p"},"personalSign")," \u7b7e\u540d ",(0,i.kt)("inlineCode",{parentName:"p"},"messageData")," \u5f97\u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"signature")),(0,i.kt)("h4",{id:"\u901a\u8fc7-ethersjs-\u751f\u6210\u7b7e\u540d"},"\u901a\u8fc7 ethers.js \u751f\u6210\u7b7e\u540d"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const everpayTxWithoutSig = {\n  tokenSymbol: 'usdt',\n  action: 'transfer',\n  from: '0x26361130d5d6E798E9319114643AF8c868412859',\n  to: '5NPqYBdIsIpJzPeYixuz7BEH_W7BEk_mb8HxBD3OHXo',\n  amount: '5260000',\n  fee: '0',\n  feeRecipient: '0x6451eB7f668de69Fb4C943Db72bCF2A73DeeC6B1',\n  nonce: '1626079771946',\n  tokenID: '0xd85476c906b5301e8e9eb58d174a6f96b9dfc5ee',\n  chainType: 'ethereum',\n  chainID: '42',\n  data: '{\"hello\":\"world\",\"this\":\"is everpay\"}',\n  version: 'v1'\n}\n\n// const messageData = getEverpayTxMessageData(everpayTxWithoutSig)\nconst messageData = `tokenSymbol:usdt\naction:transfer\nfrom:0x26361130d5d6E798E9319114643AF8c868412859\nto:5NPqYBdIsIpJzPeYixuz7BEH_W7BEk_mb8HxBD3OHXo\namount:5260000\nfee:0\nfeeRecipient:0x6451eB7f668de69Fb4C943Db72bCF2A73DeeC6B1\nnonce:1626079771946\ntokenID:0xd85476c906b5301e8e9eb58d174a6f96b9dfc5ee\nchainType:ethereum\nchainID:42\ndata:{\"hello\":\"world\",\"this\":\"is everpay\"}\nversion:v1`\n\n// personalSign\nconst signMessageAsync = async (ethConnectedSigner: Signer, message: string): Promise<string> => {\n  return await ethConnectedSigner.signMessage(message)\n}\nconst signature = await signMessageAsync(ethConnectedSigner, messageData)\n")),(0,i.kt)("p",null,"\u4f2a\u4ee3\u7801\u53c2\u8003\u6765\u6e90\uff1a",(0,i.kt)("a",{parentName:"p",href:"https://github.com/everFinance/everpay-js/blob/main/src/lib/sign.ts"},"everpay-js src/lib/sign.ts")),(0,i.kt)("h3",{id:"arweave-\u8d26\u6237\u6a21\u578b"},"Arweave \u8d26\u6237\u6a21\u578b"),(0,i.kt)("p",null,"\u901a\u8fc7 arweave RSA-PSS sha256 \u7b7e\u540d ",(0,i.kt)("inlineCode",{parentName:"p"},"everHash")," \u5bf9\u5e94\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Uint8Array"),"\uff08\u6216\u8005 ",(0,i.kt)("inlineCode",{parentName:"p"},"Buffer"),"\uff09\uff0c\u5f97\u5230\u7684\u7b7e\u540d\u7ed3\u679c\uff0c\u518d\u901a\u8fc7 ",(0,i.kt)("inlineCode",{parentName:"p"},"Arweave.utils.bufferTob64Url"),"\uff08\u4e0e\u5176\u4ed6 base64 \u8f6c\u6362\u51fd\u6570\u6709\u5dee\u5f02\uff09 \u8fdb\u884c ",(0,i.kt)("inlineCode",{parentName:"p"},"base64")," \u8f6c\u6362\u540e\uff0c\u5f97\u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"signature")),(0,i.kt)("h4",{id:"\u901a\u8fc7-arweavejs-\u751f\u6210\u7b7e\u540d"},"\u901a\u8fc7 arweave.js \u751f\u6210\u7b7e\u540d"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"// RSA-PSS sha256\nconst signMessageAsync = async (arJWK: ArJWK, address: string, everHash: string): Promise<string> => {\n  const arweave = Arweave.init(options)\n  const everHashBuffer: Buffer = Buffer.from(everHash.slice(2), 'hex')\n  // web\n  if (arJWK === 'use_wallet') {\n    try {\n      await checkArPermissions('SIGNATURE')\n    } catch {\n      throw new Error(ERRORS.SIGNATURE_PERMISSION_NEEDED)\n    }\n\n    const algorithm = {\n      name: 'RSA-PSS',\n      saltLength: 32\n    }\n\n    try {\n      const signature = await (window.arweaveWallet as any).signature(\n        everHashBuffer,\n        algorithm\n      )\n      const buf = new Uint8Array(Object.values(signature))\n      return Arweave.utils.bufferTob64Url(buf)\n    } catch {\n      throw new Error(ERRORS.SIGNATURE_FAILED)\n    }\n\n  // node\n  } else {\n    const buf = await arweave.crypto.sign(arJWK, everHashBuffer)\n    return Arweave.utils.bufferTob64Url(buf)\n  }\n}\n\nconst everpayTxWithoutSig = {\n  tokenSymbol: 'ar',\n  action: 'transfer',\n  from: '5NPqYBdIsIpJzPeYixuz7BEH_W7BEk_mb8HxBD3OHXo',\n  to: '0x26361130d5d6E798E9319114643AF8c868412859',\n  amount: '100',\n  fee: '0',\n  feeRecipient: '0x6451eB7f668de69Fb4C943Db72bCF2A73DeeC6B1',\n  nonce: '1626080392301',\n  tokenID: 'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,0xcc9141efa8c20c7df0778748255b1487957811be',\n  chainType: 'arweave,ethereum',\n  chainID: '0,42',\n  data: '{\"hello\":\"world\",\"this\":\"is everpay\",\"arOwner\":\"odtNk97a4PARR0I8g3kQpzlFVmPg-udyjfl81fbTioyP2pEw5tP5A1-FVqR-QFFPskW-j7yAze5usYNWHEir7oVQ9d9bbkcZIDEPqwSTO1JoD1BKXeeBK0xsmiSgxeY7uuRXWdhXREhlmIMsV8ObakEeXdbbxbs89XaZHBuES7boASrRVDXRz_mhMu6u_58OdLeMwR3I1BCH6nphNGVOehA7GOOqEBvtesBset0bNaLCb0JpSg5ZW_0AGLP-XydzE3IPLLx4NQEEJY21y8fChxYM4jntI78l5hojp9NlmS69EXlj0PoMjsbaWaz9WtnZaMAbnaOGAHhv8Y_TNmBI0FHpqHaGPP906Mnrgdm3tl2L40EX-Q6-liNVkB56CmPxXzSesu-4x5LLYxQ-aX3W6Hj7RCDTacxqUJHzOrhJqXSx6Jx0t8CwyfReMgVv4p5t1C3OZ8yYbJ_H3LdkeriVniaC5jQdMyIJ6QBMzr1XdXIw9WuEG2kCIYtvOp2qDuu9o2SY-9W4Yv7VWRDfWO38xxR4ZO65MMAdZxeaZ4w8sK_owH46Wm0XoT3Al-LPypaeijWqlHEu4R8c2ersD3xkDvXC_lNtaQw_qyfI3UEH5fWupY4zhZeDGkvXQh32Fv4CxlZL58iUHv9SvR7p5LgBCC3AVUbn7Sqc4xPUCZMj-Tc\"}',\n  version: 'v1'\n}\n\n// const messageData = getEverpayTxMessageData(everpayTxWithoutSig)\nconst messageData = `tokenSymbol:ar\naction:transfer\nfrom:5NPqYBdIsIpJzPeYixuz7BEH_W7BEk_mb8HxBD3OHXo\nto:0x26361130d5d6E798E9319114643AF8c868412859\namount:100\nfee:0\nfeeRecipient:0x6451eB7f668de69Fb4C943Db72bCF2A73DeeC6B1\nnonce:1626080392301\ntokenID:AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,0xcc9141efa8c20c7df0778748255b1487957811be\nchainType:arweave,ethereum\nchainID:0,42\ndata:{\"hello\":\"world\",\"this\":\"is everpay\",\"arOwner\":\"odtNk97a4PARR0I8g3kQpzlFVmPg-udyjfl81fbTioyP2pEw5tP5A1-FVqR-QFFPskW-j7yAze5usYNWHEir7oVQ9d9bbkcZIDEPqwSTO1JoD1BKXeeBK0xsmiSgxeY7uuRXWdhXREhlmIMsV8ObakEeXdbbxbs89XaZHBuES7boASrRVDXRz_mhMu6u_58OdLeMwR3I1BCH6nphNGVOehA7GOOqEBvtesBset0bNaLCb0JpSg5ZW_0AGLP-XydzE3IPLLx4NQEEJY21y8fChxYM4jntI78l5hojp9NlmS69EXlj0PoMjsbaWaz9WtnZaMAbnaOGAHhv8Y_TNmBI0FHpqHaGPP906Mnrgdm3tl2L40EX-Q6-liNVkB56CmPxXzSesu-4x5LLYxQ-aX3W6Hj7RCDTacxqUJHzOrhJqXSx6Jx0t8CwyfReMgVv4p5t1C3OZ8yYbJ_H3LdkeriVniaC5jQdMyIJ6QBMzr1XdXIw9WuEG2kCIYtvOp2qDuu9o2SY-9W4Yv7VWRDfWO38xxR4ZO65MMAdZxeaZ4w8sK_owH46Wm0XoT3Al-LPypaeijWqlHEu4R8c2ersD3xkDvXC_lNtaQw_qyfI3UEH5fWupY4zhZeDGkvXQh32Fv4CxlZL58iUHv9SvR7p5LgBCC3AVUbn7Sqc4xPUCZMj-Tc\"}\nversion:v1`\n\n// cp from: https://github.com/ethereumjs/ethereumjs-util/blob/ebf40a0fba8b00ba9acae58405bca4415e383a0d/src/signature.ts#L168\nconst hashPersonalMessage = function (message: Buffer): Buffer {\n  const prefix = Buffer.from(\n    `\\u0019Ethereum Signed Message:\\n${message.length.toString()}`,\n    'utf-8'\n  )\n  return keccak256(Buffer.concat([prefix, message]))\n}\n\nconst getEverHash = (messageData: string): string => {\n  const personalMsgHash = hashPersonalMessage(Buffer.from(messageData))\n  const everHash = `0x${personalMsgHash.toString('hex')}`\n  return everHash\n}\nconst everHash = getEverHash(messageData)\nconst signature = await signMessageAsync(config.arJWK as ArJWK, everHash)\n")),(0,i.kt)("p",null,"\u4f2a\u4ee3\u7801\u53c2\u8003\u6765\u6e90\uff1a",(0,i.kt)("a",{parentName:"p",href:"https://github.com/everFinance/everpay-js/blob/main/src/lib/sign.ts"},"everpay-js src/lib/sign.ts")),(0,i.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"danger")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},"\u7528\u4e8e \u4ee5\u592a\u574a personalSign \u7b7e\u540d\u7684\u662f ",(0,i.kt)("inlineCode",{parentName:"li"},"messageData")," string\uff0c\u5f97\u5230\u7684\u7ed3\u679c\u5373\u4e3a ",(0,i.kt)("inlineCode",{parentName:"li"},"signature")),(0,i.kt)("li",{parentName:"ul"},"\u7528\u4e8e arweave RSA-PSS sha256 \u7b7e\u540d\u7684\u662f ",(0,i.kt)("inlineCode",{parentName:"li"},"everHash")," Buffer\uff0c\u5f97\u5230\u7684\u7ed3\u679c\u9700\u8981\u8fdb\u4e00\u6b65\u901a\u8fc7 ",(0,i.kt)("inlineCode",{parentName:"li"},"Arweave.utils.bufferTob64Url")," \u8f6c\u6362\u5f97\u5230\u7684 ",(0,i.kt)("inlineCode",{parentName:"li"},"base64 string")," \u624d\u662f ",(0,i.kt)("inlineCode",{parentName:"li"},"signature"))))),(0,i.kt)("h2",{id:"signature-\u6821\u9a8c"},"signature \u6821\u9a8c"),(0,i.kt)("p",null,"\u6bcf\u4e00\u7b14 everPay \u4ea4\u6613\uff0c\u901a\u8fc7 \u53d1\u9001\u8005\u8d26\u6237\u7684\u94b1\u5305\u8fdb\u884c\u7b7e\u540d\u540e\uff0c\u5c06\u7b7e\u540d everPay \u4ea4\u6613\u4e00\u8d77\u63d0\u4ea4 everPay \u670d\u52a1\u5668\uff0ceverPay \u670d\u52a1\u5668\u4f1a\u6821\u9a8c\u6240\u6709\u7b7e\u540d\uff0c\u6765\u786e\u4fdd\u4ea4\u6613\u7684\u6709\u6548\u6027\u3002"),(0,i.kt)("h3",{id:"\u4ee5\u592a\u574a\u8d26\u6237\u6a21\u578b-1"},"\u4ee5\u592a\u574a\u8d26\u6237\u6a21\u578b"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const signature = await signMessageAsync(ethConnectedSigner, messageData)\nconst verified = ethers.utils.verifyMessage(messageData, signature).toLowerCase() === everpayTxWithoutSig.from.toLowerCase()\n")),(0,i.kt)("h3",{id:"arweave-\u8d26\u6237\u6a21\u578b-1"},"Arweave \u8d26\u6237\u6a21\u578b"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const signature = await signMessageAsync(config.arJWK as ArJWK, everHash)\n// arOwner \u4e3a arweave \u94b1\u5305 publicKey\nconst verified = arweave.crypto.verify(\n  everpayTxWithoutSig.data.arOwner,\n  Buffer.from(everHash.slice(2)),\n  Arweave.utils.b64UrlToBuffer(signature)\n)\n")),(0,i.kt)("h2",{id:"\u63d0\u4ea4\u4ea4\u6613"},"\u63d0\u4ea4\u4ea4\u6613"),(0,i.kt)("p",null,"\u5c06 everPay \u4ea4\u6613\u901a\u8fc7 POST \u8bf7\u6c42\u63d0\u4ea4 everPay \u540e\u7aef\u670d\u52a1\u5668 ",(0,i.kt)("a",{parentName:"p",href:"../../sdk/server-api/operation-api/tx"},(0,i.kt)("inlineCode",{parentName:"a"},"tx"))," \u63a5\u53e3\u3002"),(0,i.kt)("h3",{id:"\u5b57\u6bb5"},"\u5b57\u6bb5"),(0,i.kt)("p",null,"\u9664 ",(0,i.kt)("a",{parentName:"p",href:"#schema"},(0,i.kt)("inlineCode",{parentName:"a"},"Schema"))," \u5b9a\u4e49\u5b57\u6bb5\u5916\uff0c\u8865\u5145\u7b7e\u540d\u5f97\u5230",(0,i.kt)("inlineCode",{parentName:"p"},"signature")," \u4f5c\u4e3a ",(0,i.kt)("inlineCode",{parentName:"p"},"sig")," \u5b57\u6bb5\u3002"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"\u8865\u5145\u5b57\u6bb5"),(0,i.kt)("th",{parentName:"tr",align:null},"\u63cf\u8ff0"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"sig"),(0,i.kt)("td",{parentName:"tr",align:null},"\u6839\u636e\u4e0d\u540c\u8d26\u6237\u6a21\u578b\u7b7e\u540d\uff0c\u751f\u6210\u7684 ",(0,i.kt)("inlineCode",{parentName:"td"},"signature"))))),(0,i.kt)("h3",{id:"\u793a\u4f8b"},"\u793a\u4f8b"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"{\n  tokenSymbol: 'ar',\n  action: 'transfer',\n  from: '5NPqYBdIsIpJzPeYixuz7BEH_W7BEk_mb8HxBD3OHXo',\n  to: '0x26361130d5d6E798E9319114643AF8c868412859',\n  amount: '100',\n  fee: '0',\n  feeRecipient: '0x6451eB7f668de69Fb4C943Db72bCF2A73DeeC6B1',\n  nonce: '1627542576322',\n  tokenID: 'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,0xcc9141efa8c20c7df0778748255b1487957811be',\n  chainType: 'arweave,ethereum',\n  chainID: '0,42',\n  data: '{\"hello\":\"world\",\"this\":\"is everpay\",\"arOwner\":\"odtNk97a4PARR0I8g3kQpzlFVmPg-udyjfl81fbTioyP2pEw5tP5A1-FVqR-QFFPskW-j7yAze5usYNWHEir7oVQ9d9bbkcZIDEPqwSTO1JoD1BKXeeBK0xsmiSgxeY7uuRXWdhXREhlmIMsV8ObakEeXdbbxbs89XaZHBuES7boASrRVDXRz_mhMu6u_58OdLeMwR3I1BCH6nphNGVOehA7GOOqEBvtesBset0bNaLCb0JpSg5ZW_0AGLP-XydzE3IPLLx4NQEEJY21y8fChxYM4jntI78l5hojp9NlmS69EXlj0PoMjsbaWaz9WtnZaMAbnaOGAHhv8Y_TNmBI0FHpqHaGPP906Mnrgdm3tl2L40EX-Q6-liNVkB56CmPxXzSesu-4x5LLYxQ-aX3W6Hj7RCDTacxqUJHzOrhJqXSx6Jx0t8CwyfReMgVv4p5t1C3OZ8yYbJ_H3LdkeriVniaC5jQdMyIJ6QBMzr1XdXIw9WuEG2kCIYtvOp2qDuu9o2SY-9W4Yv7VWRDfWO38xxR4ZO65MMAdZxeaZ4w8sK_owH46Wm0XoT3Al-LPypaeijWqlHEu4R8c2ersD3xkDvXC_lNtaQw_qyfI3UEH5fWupY4zhZeDGkvXQh32Fv4CxlZL58iUHv9SvR7p5LgBCC3AVUbn7Sqc4xPUCZMj-Tc\"}',\n  version: 'v1',\n  sig: 'JuoDkJq1imoaQGoeGhi138e7PCtRpCqYga5rE-C0Ci-3pd-2EGsjbixAspQ6nxPYMT9HOF2shXeS7eUReQO309GtC2XwpqiipSKJiEe-IXjq70JqjCDd9cPgSVho-hmxMcjW263WUwatXXzVzETx3HRMA0GtTz6NOZju2A5ZDNWX9hzGTW7Y_m0a5OyRtc35ZxDrC3aGDBxk2cVhf7pln9JY_w0VGvEI961_y6SZ-_sX0VkqgFEGw76uF94T8CMZh4JMvc4oYPjuX-DR-Dxkm2Dz1oWZV9PsAHD7JbTqyQ2HecJnLf2DJYrYzVi-rTaLHPBZfXxIqqHjcWY6K6aaYk3m7y1-MuSwWYaeAWhnI0YPnsDCk9jsxu1flaPNvdPboQvBoUbTUFx5l9sQBmDcRyq-o2L9H0qlG_AwC-FR1xmjuJR2TKeXkv1zJAwkg2cMX9Bza4Hvjy2X88MoTBRw_GpPxbUti2yBAQWkCsj4iNrUU0CltXddhb_AWWYSLxp0_ELo7h_grBSdiOvq26PgcWBdasnfYE84765htrMlAo6QqMDw5Fs1DBD-8LJQ-d8aCqGE-JuizocbPO3KsuXurAhA6i639XhH81zGCCHow_wFGTJCIc_btVQvTltOZPPEFTOkSnLkjnMwWWhDKS0ZDeOArGTCDZrdZ3TkQDIdTvA'\n}\n")),(0,i.kt)("h3",{id:"nonce"},"nonce"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"nonce")," \u4e3a\u7528\u6237\u5728\u5ba2\u6237\u7aef\u751f\u6210\uff0ceverPay \u670d\u52a1\u5668\u53ef\u63a5\u6536\u4e0e\u670d\u52a1\u5668\u65f6\u95f4\u4e0a\u4e0b 100s \u7684\u8bef\u5dee"),(0,i.kt)("li",{parentName:"ul"},"\u7528\u6237\u6bcf\u6b21\u63d0\u4ea4 everPay \u7684\u4ea4\u6613\uff0c",(0,i.kt)("inlineCode",{parentName:"li"},"nonce")," \u5fc5\u987b\u6bd4\u8be5\u7528\u6237\u4e0a\u4e00\u7b14 ",(0,i.kt)("inlineCode",{parentName:"li"},"nonce")," \u6570\u503c\u5927")),(0,i.kt)("h2",{id:"\u4ea4\u6613\u8bb0\u5f55"},"\u4ea4\u6613\u8bb0\u5f55"),(0,i.kt)("p",null,"\u63d0\u4ea4\u81f3 everPay \u670d\u52a1\u5668\uff0c\u7ecf\u8fc7\u7b7e\u540d\u6821\u9a8c\u901a\u8fc7\u7684 everPay \u4ea4\u6613\uff0c\u53ef\u4ee5\u901a\u8fc7 everPay \u63a5\u53e3\u83b7\u53d6\u4ea4\u6613\u8bb0\u5f55\u3002"),(0,i.kt)("p",null,"everPay \u5728 ",(0,i.kt)("a",{parentName:"p",href:"#schema"},(0,i.kt)("inlineCode",{parentName:"a"},"Schema"))," \u5b9a\u4e49\u5b57\u6bb5\u3001",(0,i.kt)("inlineCode",{parentName:"p"},"sig")," \u7b7e\u540d\u5b57\u6bb5\u5916\uff0c\u6dfb\u52a0\u4e86\u90e8\u5206\u5b57\u6bb5\uff0c\u7528\u4e8e everPay \u4e1a\u52a1\u3002"),(0,i.kt)("h3",{id:"\u5b57\u6bb5-1"},"\u5b57\u6bb5"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"\u8865\u5145\u5b57\u6bb5"),(0,i.kt)("th",{parentName:"tr",align:null},"\u63cf\u8ff0"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"everHash"),(0,i.kt)("td",{parentName:"tr",align:null},"\u6bcf\u7b14 everPay \u4ea4\u6613\u90fd\u5bf9\u5e94\u4e00\u4e2a\u552f\u4e00\u7684 ",(0,i.kt)("inlineCode",{parentName:"td"},"everHash"),"\uff0c",(0,i.kt)("inlineCode",{parentName:"td"},"everHash")," \u751f\u6210\u53c2\u8003 ",(0,i.kt)("a",{parentName:"td",href:"#everhash"},"everHash"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"timestamp"),(0,i.kt)("td",{parentName:"tr",align:null},"everPay \u670d\u52a1\u5668\u63a5\u6536\u5230 everPay \u4ea4\u6613\u7684 unix milliseconds\uff0cunix \u6beb\u79d2\u65f6\u95f4\u6233")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"status"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("ul",null,(0,i.kt)("li",null,(0,i.kt)("inlineCode",{parentName:"td"},"confirmed")," \u4ee3\u8868\u8be5 everPay \u4ea4\u6613\u88ab everPay \u540e\u7aef\u7b7e\u540d\u9a8c\u8bc1\u901a\u8fc7\u540e\uff0c\u786e\u8ba4\u63a5\u6536\uff0c\u4f46\u8fd8\u672a\u8bb0\u5f55\u5230 Arweave \u533a\u5757\u94fe\u4e0a"),(0,i.kt)("li",null,(0,i.kt)("inlineCode",{parentName:"td"},"packaged")," \u4ee3\u8868\u8be5 everPay \u4ea4\u6613\u5df2\u88ab\u8bb0\u5f55\u5230 Arweave \u533a\u5757\u94fe\u4e0a")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"id"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("ul",null,(0,i.kt)("li",null,"\u5f53\u8be5\u7b14 everPay \u4ea4\u6613\u88ab\u8bb0\u5f55\u5230 Arweave \u533a\u5757\u94fe\u540e\uff0c\u6b64 ",(0,i.kt)("inlineCode",{parentName:"td"},"id")," \u5bf9\u5e94\u8be5\u7b14\u8bb0\u5f55\u5728 Arweave \u4e0a\u7684\u4ea4\u6613 hash"),(0,i.kt)("li",null,"\u5982\u8be5\u7b14 everPay \u4ea4\u6613\u672a\u88ab\u8bb0\u5f55\u5230 Arweave \u533a\u5757\u94fe\u4e0a\uff0c",(0,i.kt)("inlineCode",{parentName:"td"},"id")," \u4e3a\u7a7a\u5b57\u7b26\u4e32")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"targetChainTxHash"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("ul",null,(0,i.kt)("li",null,"\u5145\u503c\u3001\u63d0\u73b0\uff08\u975e\u5feb\u901f\u63d0\u73b0\uff09\u65f6\uff0c\u5bf9\u5e94\u7684\u533a\u5757\u94fe ",(0,i.kt)("inlineCode",{parentName:"td"},"txHash")),(0,i.kt)("li",null,"\u5982\u63d0\u73b0\uff08\u975e\u5feb\u901f\u63d0\u73b0\uff09\u672a\u5b8c\u6210\u6216\u662f everPay \u8f6c\u8d26\u4ea4\u6613\uff0c\u6b64 ",(0,i.kt)("inlineCode",{parentName:"td"},"targetChainTxHash")," \u4e3a\u7a7a\u5b57\u7b26\u4e32")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"express"),(0,i.kt)("td",{parentName:"tr",align:null},"\u5feb\u901f\u63d0\u73b0\u589e\u52a0\u7684\u5b57\u6bb5\uff0c",(0,i.kt)("inlineCode",{parentName:"td"},'express: {"chainTxHash": "","withdrawFee": "","refundEverHash": "","err": ""}'),(0,i.kt)("ul",null,(0,i.kt)("li",null,(0,i.kt)("inlineCode",{parentName:"td"},"chainTxHash")," \u4ee3\u8868\u5feb\u901f\u63d0\u73b0\u6210\u529f\u540e\uff0c\u6253\u5305\u7684 \u533a\u5757\u94fe ",(0,i.kt)("inlineCode",{parentName:"td"},"txHash")),(0,i.kt)("li",null,(0,i.kt)("inlineCode",{parentName:"td"},"withdrawFee")," \u4ee3\u8868\u5b9e\u9645\u6536\u53d6\u7684\u624b\u7eed\u8d39"),(0,i.kt)("li",null,(0,i.kt)("inlineCode",{parentName:"td"},"refundEverHash")," \u4ee3\u8868\u5feb\u901f\u63d0\u73b0\u5931\u8d25\u540e\uff0c\u505a\u5e02\u5546\u8fdb\u884c\u9000\u6b3e\u7684 everPay \u4ea4\u6613 ",(0,i.kt)("inlineCode",{parentName:"td"},"everHash")),(0,i.kt)("li",null,(0,i.kt)("inlineCode",{parentName:"td"},"err")," \u4ee3\u8868\u5feb\u901f\u63d0\u73b0\u5931\u8d25\u539f\u56e0")))))),(0,i.kt)("h3",{id:"\u67e5\u8be2\u63a5\u53e3"},"\u67e5\u8be2\u63a5\u53e3"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"../../sdk/server-api/basic-api/txs"},"txs")," \u67e5\u8be2\u6240\u6709 everPay \u4ea4\u6613\u8bb0\u5f55"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"../../sdk/server-api/basic-api/txsByAccount"},"txsByAccount")," \u67e5\u8be2\u5177\u4f53 everPay \u8d26\u6237\u7684\u4ea4\u6613\u8bb0\u5f55"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"../../sdk/server-api/basic-api/txByHash"},"txByHash")," \u6839\u636e ",(0,i.kt)("inlineCode",{parentName:"li"},"everHash")," \u67e5\u8be2 everPay \u4ea4\u6613\u8bb0\u5f55"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"../../sdk/server-api/basic-api/mintedTxByChainTxHash"},"mintedTxByChainTxHash")," \u6839\u636e\u5145\u503c\u7684\u533a\u5757\u94fe\u8bb0\u5f55ID \uff08\u5982\u4ee5\u592a\u574a\u4e3a ",(0,i.kt)("inlineCode",{parentName:"li"},"txHash"),"\uff09\uff0c\u67e5\u8be2\u5145\u503c\u7684 everPay \u4ea4\u6613\u8bb0\u5f55")))}m.isMDXComponent=!0}}]);